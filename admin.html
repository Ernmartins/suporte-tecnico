<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Tickets</title>
</head>
<body>
  <h1>Lista de Tickets</h1>
  <div id="lista"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAJe1ZqvaNG0y04PCU3PkUU2XebbI86lt4",
      authDomain: "ticket-helpdesk-a2dd8.firebaseapp.com",
      projectId: "ticket-helpdesk-a2dd8",
      storageBucket: "ticket-helpdesk-a2dd8.firebasestorage.app",
      messagingSenderId: "464766886414",
      appId: "1:464766886414:web:cd689936d78102b04b525f",
      measurementId: "G-9N8M2GXWMD"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function carregarTickets() {
      const lista = document.getElementById("lista");
      lista.innerHTML = "A carregar...";

      const querySnapshot = await getDocs(collection(db, "tickets"));

      lista.innerHTML = "";
      querySnapshot.forEach((doc) => {
        const t = doc.data();
        lista.innerHTML += `<p><b>${t.nome}</b> — ${t.descricao} — <i>${t.estado}</i></p>`;
      });
    }

    carregarTickets();
  </script>

</body>
</html>
